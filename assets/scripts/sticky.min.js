$(function(){$(".cd-table").each(function(){if($(this).find("thead").length>0&&$(this).find("th").length>0){var t=$(window),i=$(this),d=i.find("thead").clone(),s=i.find("thead, tbody").clone();i.addClass("cd-sticky-table").css({margin:0,width:"100%"}).wrap("<div class='cd-sticky' />"),i.hasClass("overflow-y")&&i.removeClass("overflow-y").parent().addClass("overflow-y"),i.after("<table class='cd-sticky-row' />"),i.find("tbody th").length>0&&i.after("<table class='cd-sticky-col' /><table class='cd-sticky-intersect' />");var c=$(this).siblings(".cd-sticky-row"),e=$(this).siblings(".cd-sticky-col"),h=$(this).siblings(".cd-sticky-intersect"),o=$(this).parent(".cd-sticky");c.append(d),e.append(s).find("thead th:gt(0)").remove().end().find("tbody td").remove(),h.html("<thead><tr><th>"+i.find("thead th:first-child").html()+"</th></tr></thead>");var n=function(){i.find("thead th").each(function(t){c.find("th").eq(t).width($(this).width())}).end().find("tr").each(function(t){e.find("tr").eq(t).height($(this).height())}),c.width(i.width()),e.find("th").add(h.find("th")).width(i.find("thead th").width())},a=function(){var d=f();i.height()>o.height()?o.scrollTop()>0?c.add(h).css({opacity:1,top:o.scrollTop()}):c.add(h).css({opacity:0,top:0}):t.scrollTop()>i.offset().top&&t.scrollTop()<i.offset().top+i.outerHeight()-d?c.add(h).css({opacity:1,top:t.scrollTop()-i.offset().top}):c.add(h).css({opacity:0,top:0})},l=function(){o.scrollLeft()>0?e.add(h).css({opacity:1,left:o.scrollLeft()}):e.css({opacity:0}).add(h).css({left:0})},f=function(){var d=0;return i.find("tbody tr:lt(3)").each(function(){d+=$(this).height()}),d>.25*t.height()&&(d=.25*t.height()),d+=c.height()};n(),i.parent(".cd-sticky").scroll($.throttle(125,function(){a(),l()})),t.load(n).resize($.debounce(125,function(){n(),a(),l()})).scroll($.throttle(125,a))}})});